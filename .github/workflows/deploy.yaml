name: Deploy to Coolify (Authenticated)

on:
  push:
    tags:
      - 'v*'    # Se ejecuta solo cuando creas un nuevo tag: v1.0.0, v2.3.1, etc.

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger authenticated deployment to Coolify
        run: |
          echo "Iniciado despliegue de versi√≥n ${{ github.ref_name }} a Coolify..."
          curl -X POST -d "" \
          -H "Authorization: Bearer ${{ secrets.COOLIFY_API_KEY }}" \
          "${{ secrets.COOLIFY_DEPLOY_HOOK }}"